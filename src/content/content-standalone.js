/*! For license information please see content-standalone.js.LICENSE.txt */
(()=>{"use strict";var e,t={20:(e,t,n)=>{var o=n(540),s=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,l={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,o)&&!a.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:s,type:e,key:c,ref:d,props:l,_owner:r.current}}t.jsx=l,t.jsxs=l},338:(e,t,n)=>{var o=n(961);t.createRoot=o.createRoot,o.hydrateRoot},540:(e,t,n)=>{e.exports=n(287)},848:(e,t,n)=>{e.exports=n(20)},930:(e,t,n)=>{var o=n(848),s=n(540),i=n(338);const r=({title:e="Leet Mentor",subtitle:t="AI Interview Assistant",status:n="ready",onSettingsClick:s})=>(0,o.jsxs)("div",{className:"bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-xl border-b border-white/10 p-6 relative overflow-hidden",children:[(0,o.jsxs)("div",{className:"absolute inset-0 opacity-5",children:[(0,o.jsx)("div",{className:"absolute top-0 left-0 w-40 h-40 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2"}),(0,o.jsx)("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-br from-green-500 to-blue-500 rounded-full blur-3xl transform translate-x-1/2 translate-y-1/2"})]}),(0,o.jsxs)("div",{className:"relative z-10 flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg border border-white/20 animate-fade-in-scale",children:(0,o.jsx)("span",{className:"text-xl",children:"🎯"})}),(0,o.jsxs)("div",{className:"leading-tight",children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:e}),(0,o.jsx)("div",{className:"text-sm font-medium text-gray-600 uppercase tracking-wider",children:t})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm rounded-full border border-white/30",children:[(0,o.jsx)("div",{className:`status-indicator ${(e=>{switch(e){case"ready":default:return"status-indicator-ready";case"active":return"status-indicator-active";case"paused":return"status-indicator-paused";case"error":return"status-indicator-error"}})(n)}`}),(0,o.jsx)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:(e=>{switch(e){case"ready":default:return"READY";case"active":return"ACTIVE";case"paused":return"PAUSED";case"error":return"ERROR"}})(n)})]}),s&&(0,o.jsx)("button",{onClick:s,className:"\n                                group p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl\n                                hover:bg-white/20 hover:border-white/30 hover:scale-105\n                                active:scale-95 transition-all duration-200\n                            ",title:"Settings",children:(0,o.jsx)("span",{className:"text-lg group-hover:rotate-45 transition-transform duration-300",children:"⚙️"})})]})]})]}),a=({title:e,difficulty:t})=>(0,o.jsxs)("div",{className:"bg-gradient-to-r from-white/8 to-white/4 p-6 backdrop-blur-lg border-b border-white/10 relative overflow-hidden",children:[(0,o.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/5 to-transparent rounded-full blur-2xl"}),(0,o.jsxs)("div",{className:"relative z-10",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-2 leading-tight text-gray-800 line-clamp-2",children:e}),(0,o.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"No Problem Selected"===e?"Test Mode - Ready for Interview":"LeetCode Problem"})]}),(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsxs)("div",{className:`\n                            inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wide\n                            shadow-lg border-2 border-white/30 backdrop-blur-sm animate-fade-in-scale\n                            ${(e=>{switch(e.toLowerCase()){case"easy":return"difficulty-easy";case"medium":default:return"difficulty-medium";case"hard":return"difficulty-hard"}})(t)}\n                        `,children:[(0,o.jsx)("div",{className:"w-2 h-2 bg-white rounded-full opacity-90 animate-pulse-slow"}),t]})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{children:"📊"}),(0,o.jsx)("span",{className:"font-medium",children:"Interview Practice"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{children:"⏱️"}),(0,o.jsx)("span",{className:"font-medium",children:"Ready to start"})]})]})]})]}),l=({onStartInterview:e,onSettingsClick:t,isInterviewActive:n=!1})=>(0,o.jsxs)("div",{className:"p-6 flex gap-4 items-stretch",children:[(0,o.jsxs)("button",{id:"start-interview-btn",onClick:e,disabled:!e,className:`\n                    group relative flex items-center gap-3 px-8 py-4 text-base font-semibold cursor-pointer \n                    transition-all duration-300 ease-out flex-1 justify-center rounded-xl overflow-hidden\n                    disabled:opacity-50 disabled:cursor-not-allowed\n                    ${n?"bg-gradient-to-r from-amber-500 via-orange-500 to-orange-600 text-white shadow-lg hover:shadow-xl hover:shadow-orange-500/25 active:scale-[0.98]":"leetmentor-button-primary shadow-lg hover:shadow-xl hover:shadow-blue-500/25 active:scale-[0.98]"}\n                `,children:[(0,o.jsx)("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),n&&(0,o.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-white rounded-full animate-pulse-slow"}),(0,o.jsx)("span",{className:"text-xl transition-transform duration-300 "+(n?"animate-bounce-gentle":"group-hover:scale-110"),children:n?"🎯":"🚀"}),(0,o.jsx)("span",{className:"font-semibold tracking-wide",children:n?"Interview In Progress":"Start Interview"}),!n&&(0,o.jsx)("div",{className:"ml-2 transform group-hover:translate-x-1 transition-transform duration-300",children:"→"})]}),t&&(0,o.jsx)("button",{id:"settings-btn",onClick:t,className:"\n                        group flex items-center justify-center p-4 flex-shrink-0 rounded-xl\n                        bg-white/10 backdrop-blur-sm border border-white/20 text-gray-700\n                        hover:bg-white/20 hover:border-white/30 hover:scale-105\n                        active:scale-95 transition-all duration-200\n                    ",title:"Settings",children:(0,o.jsx)("span",{className:"text-xl group-hover:rotate-45 transition-transform duration-300",children:"⚙️"})})]}),c=({messages:e,onSendMessage:t,onClearChat:n,onExportChat:i,onStartVoiceInput:r,onStopVoiceInput:a,onSkipVoice:l,onSpeedChange:c,currentSpeed:d=1,isVisible:u=!1,isTyping:h=!1,isListening:p=!1})=>{console.log("🔧 ChatInterface props:",{messagesCount:e.length,isVisible:u,isTyping:h,isListening:p,hasSkipVoice:!!l,onSkipVoice:l});const[g,m]=(0,s.useState)(""),[f,b]=(0,s.useState)(!0),v=(0,s.useRef)(null),y=(0,s.useRef)(null),x=(0,s.useRef)(null),[w,N]=(0,s.useState)(d),S=(0,s.useRef)(null),A=(e=250)=>{const t=x.current;if(!t)return;const n=t.scrollTop,o=t.scrollHeight-t.clientHeight;S.current&&cancelAnimationFrame(S.current);const s=performance.now(),i=r=>{const a=Math.min(1,(r-s)/e);t.scrollTop=n+(o-n)*(e=>1-Math.pow(1-e,3))(a),a<1&&(S.current=requestAnimationFrame(i))};S.current=requestAnimationFrame(i)};(0,s.useEffect)(()=>()=>{S.current&&cancelAnimationFrame(S.current)},[]),(0,s.useEffect)(()=>{N(d)},[d]),(0,s.useEffect)(()=>{v.current&&(v.current.style.height="auto",v.current.style.height=Math.min(v.current.scrollHeight,128)+"px")},[g]),(0,s.useEffect)(()=>{f&&x.current&&A(250)},[e,h,f]);const E=()=>{const e=g.trim();e&&t&&(t(e),m(""),v.current&&(v.current.style.height="auto"))};return(0,s.useEffect)(()=>{const e=e=>{"Space"===e.code&&u&&(e.preventDefault(),e.stopPropagation(),e.target!==document.body&&e.target!==document.documentElement||e.repeat||p||(console.log("🎤 Spacebar pressed - Starting voice input"),r?.()))},t=e=>{"Space"===e.code&&u&&p&&(e.preventDefault(),e.stopPropagation(),console.log("🎤 Spacebar released - Stopping voice input"),a?.()),"Escape"===e.code&&u&&p&&(e.preventDefault(),e.stopPropagation(),console.log("🎤 Escape pressed - Force stopping voice input"),a?.())};return u&&(document.addEventListener("keydown",e,!0),document.addEventListener("keyup",t,!0),window.addEventListener("keyup",t,!0)),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",t,!0),window.removeEventListener("keyup",t,!0)}},[u,p,r,a]),u?(0,o.jsxs)("div",{className:"bg-white/5 border-t border-white/10 backdrop-blur-xl flex flex-col overflow-hidden relative",children:[(0,o.jsxs)("div",{className:"chat-header",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"status-indicator status-indicator-ready"}),(0,o.jsx)("div",{className:"text-base font-bold text-gray-800 tracking-wide",children:"Interview Session"}),(0,o.jsxs)("div",{className:"text-xs text-gray-600 font-medium bg-gray-100 px-2 py-1 rounded-full",children:[e.length," ",1===e.length?"message":"messages"]})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsxs)("button",{onClick:n,disabled:0===e.length,className:"\n                            group px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 tracking-wide\n                            bg-gray-100 text-gray-700 border border-gray-200\n                            hover:bg-gray-200 hover:border-gray-300 hover:scale-105\n                            disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\n                            active:scale-95\n                        ",title:"Clear chat history",children:[(0,o.jsx)("span",{className:"group-hover:mr-1 transition-all duration-200",children:"🗑️"}),"Clear"]}),(0,o.jsxs)("button",{onClick:i,disabled:0===e.length,className:"\n                            group px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 tracking-wide\n                            bg-blue-500 text-white border border-blue-600\n                            hover:bg-blue-600 hover:border-blue-700 hover:scale-105\n                            disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\n                            active:scale-95\n                        ",title:"Export chat transcript",children:[(0,o.jsx)("span",{className:"group-hover:mr-1 transition-all duration-200",children:"📁"}),"Export"]})]})]}),(0,o.jsxs)("div",{ref:x,className:"chat-messages",onScroll:()=>{if(x.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=x.current;b(e+n>=t-100)}},children:[0===e.length?(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,o.jsx)("div",{className:"text-4xl mb-3",children:"💬"}),(0,o.jsx)("div",{className:"text-gray-600 font-medium",children:"No messages yet"}),(0,o.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Start the interview to begin your conversation"})]}):e.map(e=>{return(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("div",{className:"message-avatar "+("user"===e.role?"message-avatar-user":"message-avatar-assistant"),children:"user"===e.role?"👤":"🤖"}),(0,o.jsxs)("div",{className:"flex-1 p-4 rounded-2xl font-medium backdrop-blur-lg "+("user"===e.role?"message-user":"message-assistant"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:"user"===e.role?"You":"AI Interviewer"}),(0,o.jsx)("div",{className:"text-xs opacity-60 font-medium",children:(t=e.timestamp,t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]}),(0,o.jsx)("div",{className:"whitespace-pre-wrap break-words leading-relaxed",children:e.content})]})]},e.id);var t}),h&&(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("div",{className:"message-avatar message-avatar-assistant",children:"🤖"}),(0,o.jsxs)("div",{className:"flex-1 message-assistant p-4 rounded-2xl backdrop-blur-lg",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:"AI Interviewer"}),(0,o.jsx)("div",{className:"text-xs opacity-60",children:"speaking..."})]}),l?(0,o.jsx)("button",{onClick:l,className:"text-xs px-2 py-1 bg-orange-500 hover:bg-orange-600 text-white rounded-md transition-colors flex items-center gap-1",title:"Skip voice response",children:"⏭️ Skip"}):(0,o.jsx)("div",{className:"text-xs text-gray-400",children:"No skip callback"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-typing-enhanced"}),(0,o.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-typing-enhanced",style:{animationDelay:"0.2s"}}),(0,o.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-typing-enhanced",style:{animationDelay:"0.4s"}})]})]})]}),(0,o.jsx)("div",{ref:y})]}),!f&&e.length>2&&(0,o.jsx)("button",{onClick:()=>{A(250),b(!0)},className:"absolute bottom-20 right-4 bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full shadow-lg transition-all duration-200 hover:scale-110 z-10",title:"Scroll to bottom",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{flexShrink:0},children:(0,o.jsx)("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,o.jsxs)("div",{className:"chat-input-section",children:[(0,o.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,o.jsxs)("div",{className:"flex-1 relative",children:[(0,o.jsx)("textarea",{ref:v,value:g,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},className:"leetmentor-input w-full resize-none",placeholder:"💬 Type your interview response here...",rows:1,disabled:!t}),g.trim()&&(0,o.jsx)("div",{className:"absolute top-2 right-3 text-xs text-gray-400 font-mono",children:g.length})]}),(0,o.jsx)("button",{onClick:E,disabled:!g.trim()||!t,className:"send-button",title:"Send message (Enter)",children:(0,o.jsx)("span",{className:"text-lg font-bold",children:"➤"})})]}),c&&(0,o.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700 font-medium",children:[(0,o.jsx)("span",{className:"text-blue-500",children:"🎵"}),(0,o.jsx)("span",{children:"Voice Speed:"})]}),(0,o.jsx)("div",{className:"flex gap-1",children:[.75,1,1.25,1.5,1.75,2].map(e=>(0,o.jsxs)("button",{onClick:()=>{N(e),c(e)},className:"px-3 py-1 text-xs font-medium rounded-md transition-all duration-200 "+(Math.abs(w-e)<.01?"bg-blue-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 hover:border-gray-300"),title:`Set voice speed to ${e}x`,children:[e,"x"]},e))})]})}),(0,o.jsxs)("div",{className:"mt-3 flex justify-between items-center text-sm",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 font-medium",children:[(0,o.jsx)("span",{className:"text-blue-500",children:"💡"}),(0,o.jsxs)("span",{children:["Press ",(0,o.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded text-xs font-mono",children:"Enter"})," to send"]}),(0,o.jsx)("span",{className:"text-gray-400",children:"•"}),(0,o.jsxs)("span",{className:p?"text-red-600 font-semibold":"",children:["Hold ",(0,o.jsx)("kbd",{className:"px-1 py-0.5 rounded text-xs font-mono "+(p?"bg-red-200 border border-red-400":"bg-gray-200"),children:"Space"})," for voice",p&&(0,o.jsx)("span",{className:"ml-1 text-red-600",children:"🎤 Listening..."})]})]}),(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,o.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded font-mono",children:"Esc"})," to ",p?"stop voice":"unfocus"]})]})]})]}):null},d=({problem:e,onSendMessage:t,onStartInterview:n,onSettingsClick:i,onClearChat:d,onExportChat:u,onStartVoiceInput:h,onStopVoiceInput:p,onSkipVoice:g,onSpeedChange:m,currentSpeed:f=1,messages:b=[],isInterviewActive:v=!1,isTyping:y=!1,isListening:x=!1})=>{console.log("🔧 StandaloneInterface called with:",{problem:e,problemTitle:e?.title,messagesCount:b.length,isInterviewActive:v,isTyping:y,isListening:x,hasSkipVoice:!!g});const[w,N]=(0,s.useState)(e);(0,s.useEffect)(()=>{console.log("🔄 Problem prop updated:",e?.title),N(e)},[e]);const S=()=>{i&&i()};return(0,o.jsxs)("div",{className:"\n            leetmentor-card relative z-50 overflow-hidden m-6 \n            bg-gradient-to-br from-white via-white to-gray-50/50\n            animate-fade-in-scale\n        ",children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/3 via-purple-500/2 to-green-500/3 pointer-events-none"}),(0,o.jsxs)("div",{className:"relative z-10",children:[(0,o.jsx)(r,{status:v?"active":"ready",onSettingsClick:S}),(0,o.jsx)(a,{title:w?.title||"Loading...",difficulty:w?.difficulty||"Medium"}),(0,o.jsx)(l,{onStartInterview:()=>{n&&n()},onSettingsClick:S,isInterviewActive:v}),(0,o.jsx)("div",{className:"transition-all duration-300 ease-in-out "+(v?"opacity-100 max-h-none overflow-visible":"opacity-0 max-h-0 overflow-hidden"),children:(0,o.jsx)(c,{messages:b,onSendMessage:e=>{t&&t(e)},onClearChat:()=>{d&&d()},onExportChat:()=>{u&&u()},onStartVoiceInput:h,onStopVoiceInput:p,onSkipVoice:g,onSpeedChange:m,currentSpeed:f,isVisible:v,isTyping:y,isListening:x})})]}),(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-green-500 opacity-60"})]})};var u=n(99),h=n(131);const p={SYSTEM_PROMPT:'You are an experienced senior software engineer conducting a friendly but thorough technical interview. Think of yourself as a mentor who\'s helping someone prepare for real interviews while also assessing their skills.\n\nPersonality Traits:\n- Friendly and approachable, like a colleague you\'d work with\n- Professional but conversational - use "I" statements and natural speech patterns\n- Patient and encouraging, especially for beginners\n- Occasionally share brief "real world" anecdotes or comparisons\n- Use filler words sparingly but naturally (like "so", "well", "you know")\n- Show genuine curiosity about their thought process\n\nInterviewing Style:\n- Ask probing questions that show you\'re actively listening\n- When they get stuck, first try to guide them with questions before giving hints\n- Use the Socratic method - ask questions that lead them to the answer\n- Be professional and measured in feedback\n- Acknowledge good points without over-enthusiasm\n- Focus on the technical merits of their approach rather than personal praise\n\nTechnical Assessment:\n- Focus on understanding over memorization\n- Care more about problem-solving approach than perfect solutions\n- Discuss trade-offs and real-world considerations\n- Ask about testing and edge cases in a conversational way\n- When reviewing code, focus on readability and maintainability\n\nRemember: This should feel like a conversation with an experienced developer, not an interrogation. Your goal is to both assess and develop their skills.',WELCOME_MESSAGE:"Hey there! I'm excited to chat with you about this problem. I see you're working on a {difficulty} level {title} question. Let's start by having you walk me through what you understand about this problem - no pressure, I just want to hear your thoughts!",ENCOURAGEMENT_PHRASES:["Okay, that's a reasonable approach.","I see what you're getting at.","That's one way to think about it.","Not bad.","Alright, let's see where this takes us.","Hmm, interesting perspective.","That could work.","Let's explore this further.","I see your reasoning.","That makes sense."],HINT_PHRASES:["Let me give you a small hint...","Consider this approach...","What if we think about it this way...","Here's something that might help...","Let's break this down...","Have you considered...","What do you think would happen if...","Another way to think about this is...","Let me ask you this...","What if we tried...","How would you feel about...","Let's explore this angle...","What are your thoughts on...","Have you run into anything like this before?"],CONVERSATIONAL_TRANSITIONS:["So, moving on...","That makes sense. Now...","Great, let's talk about...","Okay, what about...","I see. How would you handle...","That's interesting. Let's consider...","Alright, let's shift gears to...","Good point. What if we look at...","Makes sense. Now I'm curious about...","Okay, let's dive into...","I like where this is going. What about...","That's a good foundation. Now let's think about..."],FOLLOW_UP_QUESTIONS:["Can you tell me more about why you chose that approach?","What made you think that would work?","How did you arrive at that conclusion?","What would you do if that assumption wasn't true?","Can you walk me through your thought process?","What trade-offs are you considering here?","How does this compare to other solutions you've seen?","What would you change if you had more time?","How confident are you in this approach?","What edge cases are you thinking about?"]};class g{constructor(e,t="gpt-4"){this.apiKey=e,this.model=t}async generateInterviewResponse(e,t,n){const o=this.buildInterviewMessages(e,t,n);try{const e=await this.sendChatRequest(o);return e.choices[0]?.message?.content||"I apologize, but I couldn't generate a response. Please try again."}catch(e){throw console.error("ChatGPT API error:",e),new Error("Failed to get AI response. Please check your API key and try again.")}}async generateFeedback(e,t){const n=this.buildFeedbackPrompt(e,t);try{const e=await this.sendChatRequest([n]);return e.choices[0]?.message?.content||"Unable to generate feedback at this time."}catch(e){throw console.error("Feedback generation error:",e),new Error("Failed to generate feedback.")}}buildInterviewMessages(e,t,n){const o=[{role:"system",content:`${p.SYSTEM_PROMPT}\n\nCurrent Problem:\nTitle: ${e.title}\nDifficulty: ${e.difficulty}\nDescription: ${e.description}\n\nInterview Guidelines:\n- Use conversational language and vary your responses to sound natural\n- Ask follow-up questions that show genuine curiosity about their thought process\n- Use the InterviewUtils functions available to add variety to your responses\n- Sometimes use phrases like "I'm curious about...", "That's interesting...", "Let me think about this..."\n- Be encouraging but specific in your feedback\n- Show enthusiasm when they demonstrate good understanding\n- Be patient and guide them step by step when they're stuck\n\nAvailable Tools:\n- InterviewUtils.getRandomEncouragement() - for positive reinforcement\n- InterviewUtils.getRandomHintPhrase() - for gentle guidance\n- InterviewUtils.getRandomTransition() - for smooth topic changes\n- InterviewUtils.getRandomFollowUp() - for deeper exploration\n- InterviewUtils.enhanceWithConversation() - to make responses more natural\n- InterviewUtils.addInterviewerPersonality() - to vary response patterns`}];return o.push(...t),o.push({role:"user",content:n}),o}buildFeedbackPrompt(e,t){const n=t.filter(e=>"system"!==e.role).map(e=>`${e.role}: ${e.content}`).join("\n\n");return{role:"user",content:`Please provide detailed feedback for this technical interview session.\n\nProblem: ${e.title} (${e.difficulty})\n\nInterview Transcript:\n${n}\n\nPlease provide feedback in the following format:\n\n## Overall Performance (1-10): [score]\n\n## Detailed Analysis:\n\n### Communication (1-10): [score]\n[Detailed feedback on how well the candidate communicated their thought process]\n\n### Problem Solving (1-10): [score]\n[Feedback on approach, algorithm design, and problem-solving methodology]\n\n### Code Quality (1-10): [score]\n[If code was written, evaluate structure, readability, and correctness]\n\n### Time Management (1-10): [score]\n[How well they managed time and worked through the problem efficiently]\n\n## Strengths:\n- [Key strengths demonstrated]\n\n## Areas for Improvement:\n- [Specific areas to work on]\n\n## Recommendations:\n[Specific advice for future interviews and skill development]`}}async sendChatRequest(e){const t={model:this.model,messages:e,temperature:.7,max_tokens:1e3},n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)});if(!n.ok){const e=await n.json();throw new Error(`OpenAI API error: ${e.error?.message||"Unknown error"}`)}return n.json()}async testConnection(){try{const e=await this.sendChatRequest([{role:"user",content:'Hello, please respond with "Connection successful"'}]);return e.choices[0]?.message?.content?.includes("Connection successful")||!1}catch(e){return!1}}setApiKey(e){this.apiKey=e}setModel(e){this.model=e}}class m{setVoiceSpeed(e){this.voiceSpeed=e,this.voiceService&&this.voiceService.setSpeechRate(e),console.log(`🎵 STANDALONE REACT: Voice speed set to ${e}x`),this.showNotification(`🎵 Voice speed: ${e}x`,"info")}constructor(){this.isInjected=!1,this.currentPhase="problem-understanding",this.conversationHistory=[],this.isInterviewActive=!1,this.lastSubmissionCheck=null,this.currentProblemSlug=null,this.hasAcceptedSubmission=!1,this.isRecording=!1,this.isTyping=!1,this.mediaRecorder=null,this.audioChunks=[],this.voiceEnabled=!0,this.voiceSpeed=1,this.currentAudio=null,this.lastTranscriptionTime=0,this.transcriptionCooldown=2e3,this.root=null,this.container=null,this.voiceService=null,this.realtimeService=null,this.chatGPTService=null,this.isVoiceEnabled=!1,this.apiKey="",this.currentProblem=null,console.log("🚀 STANDALONE REACT: StandaloneAIInterviewer constructor called"),this.initializeVoiceServices(),this.init()}async initializeVoiceServices(){try{if(console.log("🎤 Initializing voice services..."),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage){const e=await chrome.runtime.sendMessage({type:"GET_CONFIG"});e.success&&e.data&&(this.apiKey=e.data.apiKey||"",this.isVoiceEnabled=e.data.voice?.enabled&&e.data.speechRecognition?.enabled,this.apiKey?(this.voiceService=new u.q,this.realtimeService=new h.d,this.chatGPTService=new g(this.apiKey,"gpt-4"),this.voiceService.setApiKey(this.apiKey),this.voiceService.setUseOpenAIVoice(!0),this.voiceService.setUseOpenAIWhisper(!0),this.realtimeService.setApiKey(this.apiKey),this.setupVoiceEventHandlers(),console.log("✅ All services initialized successfully")):console.warn("⚠️ No API key found - AI features disabled"))}else console.log("ℹ️ Not in Chrome extension context - voice services disabled")}catch(e){console.error("❌ Failed to initialize voice services:",e)}}setupVoiceEventHandlers(){this.voiceService&&(this.voiceService.onSpeechResultReceived((e,t)=>{console.log("🎤 Speech result:",e,"Final:",t),t&&e.trim()&&this.handleUserMessage(e.trim())}),this.voiceService.onSpeechStarted(()=>{console.log("🎤 Speech started")}),this.voiceService.onSpeechEnded(()=>{console.log("🎤 Speech ended")}),this.voiceService.onSpeechErrorOccurred(e=>{console.error("🎤 Speech error:",e),this.showNotification(`Voice error: ${e}`,"error")}),this.voiceService.onSpeakStarted(()=>{console.log("🔊 AI started speaking"),this.isTyping=!0,this.forceUpdate()}),this.voiceService.onSpeakEnded(()=>{console.log("🔊 AI finished speaking"),this.isTyping=!1,this.forceUpdate()}))}async init(){console.log("🚀 STANDALONE REACT: Initializing..."),"complete"!==document.readyState?(console.log("🚀 STANDALONE REACT: Document not ready, waiting for load event"),window.addEventListener("load",()=>{console.log("🚀 STANDALONE REACT: Load event fired"),this.start()})):(console.log("🚀 STANDALONE REACT: Document ready, starting immediately"),this.start()),this.setupNavigationWatcher()}start(){console.log("🚀 STANDALONE REACT: Start method called"),window.location.href.includes("react-test.html")?(console.log("🧪 TEST MODE: Bypassing LeetCode detection, injecting test interface..."),this.injectTestInterface()):this.isLeetCodeProblemPage()?(console.log("✅ STANDALONE REACT: Detected LeetCode problem page"),setTimeout(()=>{console.log("🚀 STANDALONE REACT: Timeout fired, detecting problem..."),this.detectProblem()},1e3)):console.log("❌ STANDALONE REACT: Not a LeetCode problem page")}injectTestInterface(){console.log("🧪 TEST MODE: Creating test problem and injecting interface...");const e={id:"two-sum",title:"Two Sum",titleSlug:"two-sum",difficulty:"Easy",description:"Given an array of integers nums and an integer target, return indices of the two numbers such that they add up to target.\n\nYou may assume that each input would have exactly one solution, and you may not use the same element twice.\n\nYou can return the answer in any order.",url:"https://leetcode.com/problems/two-sum/"};console.log("🧪 TEST MODE: Using test problem:",e.title),this.injectInterviewInterface(e)}isLeetCodeProblemPage(){const e=window.location.href.includes("leetcode.com/problems/")&&!window.location.href.includes("/submissions/");return console.log("🚀 STANDALONE REACT: isLeetCodeProblemPage check:",e),e}isSameProblem(e){const t=window.location.href.match(/leetcode\.com\/problems\/([^/?]+)/),n=e.match(/leetcode\.com\/problems\/([^/?]+)/);if(!t||!n)return!1;const o=t[1],s=n[1];return console.log("🚀 STANDALONE REACT: Problem comparison - Current:",o,"New:",s),o===s}setupNavigationWatcher(){console.log("🚀 STANDALONE REACT: Setting up navigation watcher");let e=window.location.href;this.currentProblemSlug=this.extractProblemSlug(e),console.log("🚀 STANDALONE REACT: Initial URL:",e),console.log("🚀 STANDALONE REACT: Initial problem slug:",this.currentProblemSlug);const t=()=>{if(window.location.href!==e){const t=window.location.href,n=this.extractProblemSlug(t);console.log("🔄 STANDALONE REACT: Navigation detected!"),console.log("🔄 STANDALONE REACT: Old URL:",e),console.log("🔄 STANDALONE REACT: New URL:",t),console.log("🔄 STANDALONE REACT: Old slug:",this.currentProblemSlug),console.log("🔄 STANDALONE REACT: New slug:",n),this.currentProblemSlug!==n&&null!==n&&null!==this.currentProblemSlug&&this.isInjected?(console.log("🔄 STANDALONE REACT: Different problem detected, resetting..."),this.reset(),this.currentProblemSlug=n,this.isLeetCodeProblemPage()&&setTimeout(()=>{this.detectProblem()},1500)):this.currentProblemSlug===n&&null!==n?console.log("🔄 STANDALONE REACT: Same problem, different section - NO RESET"):null===n?console.log("🔄 STANDALONE REACT: Not a LeetCode problem page - NO RESET"):!this.isInjected&&null!==n&&this.isLeetCodeProblemPage()?(console.log("🔄 STANDALONE REACT: No interface yet, detecting problem..."),this.currentProblemSlug=n,setTimeout(()=>{this.detectProblem()},1e3)):console.log("🔄 STANDALONE REACT: Other navigation scenario - NO RESET"),e=t,null!==n&&(this.currentProblemSlug=n)}};setInterval(t,1e3),window.addEventListener("popstate",()=>{console.log("🔄 STANDALONE REACT: Popstate event"),setTimeout(t,100)})}extractProblemSlug(e){const t=e.match(/leetcode\.com\/problems\/([^/?]+)/);return t?t[1]:null}reset(){console.log("🚀 STANDALONE REACT: Resetting state"),this.isInjected=!1,this.isInterviewActive=!1,this.currentPhase="problem-understanding",this.conversationHistory=[],this.hasAcceptedSubmission=!1,this.root&&this.container&&(this.root.unmount(),this.root=null);const e=document.getElementById("leetmentor-standalone");e&&e.remove(),this.container=null}async detectProblem(){try{console.log("🔍 STANDALONE REACT: Detecting problem...");const e=await this.waitForAnyElement(['[data-cy="question-title"]',".css-v3d350","h1",'[class*="title"]','[class*="Title"]',".text-title-large",".text-xl",'h1[class*="title"]','[data-testid="question-title"]']);if(e){console.log("✅ STANDALONE REACT: Title element found:",e.textContent);const t=await this.extractProblemData(e);t?(console.log("✅ STANDALONE REACT: Problem detected:",t.title),this.injectInterviewInterface(t)):(console.log("❌ STANDALONE REACT: Could not extract problem data"),this.injectInterviewInterface())}else console.log("❌ STANDALONE REACT: No title element found after trying all selectors"),this.injectInterviewInterface()}catch(e){console.error("❌ STANDALONE REACT: Error detecting problem:",e)}}waitForAnyElement(e,t=15e3){return console.log("🚀 STANDALONE REACT: Waiting for any element from:",e),new Promise(n=>{for(const t of e){const e=document.querySelector(t);if(e)return console.log("✅ STANDALONE REACT: Element found immediately with selector:",t),void n(e)}const o=new MutationObserver(()=>{for(const t of e){const e=document.querySelector(t);if(e)return console.log("✅ STANDALONE REACT: Element found via observer with selector:",t),o.disconnect(),void n(e)}});o.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(()=>{console.log("⏰ STANDALONE REACT: Element wait timeout after trying:",e),o.disconnect(),n(null)},t)})}async extractProblemData(e){console.log("🚀 STANDALONE REACT: Extracting problem data...");const t=window.location.href,n=t.match(/leetcode\.com\/problems\/([^/?]+)/);if(!n)return console.log("❌ STANDALONE REACT: URL does not match LeetCode pattern"),null;const o=n[1];console.log("🚀 STANDALONE REACT: Title slug:",o);let s="";if(e)s=e.textContent?.trim()||"",console.log("🚀 STANDALONE REACT: Using provided title element:",s);else{const e=document.querySelector('[data-cy="question-title"]')||document.querySelector(".css-v3d350")||document.querySelector("h1")||document.querySelector('[class*="title"]');if(!e)return console.log("❌ STANDALONE REACT: No title element found"),null;s=e.textContent?.trim()||"",console.log("🚀 STANDALONE REACT: Found title element:",s)}const i=this.detectDifficulty();return console.log("🚀 STANDALONE REACT: Detected difficulty:",i),{id:o,title:s,titleSlug:o,difficulty:i,description:"Standalone version - minimal data",url:t}}detectDifficulty(){const e=['[data-e2e-locator="console-question-detail-difficulty"]','[class*="difficulty"]','[class*="Difficulty"]',".text-difficulty-easy",".text-difficulty-medium",".text-difficulty-hard",".text-easy",".text-medium",".text-hard",'[data-cy*="difficulty"]',".text-olive",".text-yellow",".text-pink"];for(const t of e){const e=document.querySelector(t);if(e){const n=e.textContent?.toLowerCase().trim()||"";if(console.log("🔍 STANDALONE REACT: Found difficulty element:",t,"text:",n),n.includes("easy"))return"Easy";if(n.includes("medium"))return"Medium";if(n.includes("hard"))return"Hard"}}const t=document.querySelectorAll("*");for(const e of t){const t=e.className.toLowerCase(),n=e.textContent?.toLowerCase().trim()||"";if((t.includes("easy")||"easy"===n)&&n.length<10)return console.log("🔍 STANDALONE REACT: Found Easy difficulty via class/text"),"Easy";if((t.includes("medium")||"medium"===n)&&n.length<10)return console.log("🔍 STANDALONE REACT: Found Medium difficulty via class/text"),"Medium";if((t.includes("hard")||"hard"===n)&&n.length<10)return console.log("🔍 STANDALONE REACT: Found Hard difficulty via class/text"),"Hard"}return console.log("⚠️ STANDALONE REACT: Could not detect difficulty, defaulting to Medium"),"Medium"}injectInterviewInterface(e){console.log("💉 STANDALONE REACT: Injecting interview interface..."),this.currentProblem=e||null,console.log("📝 Current problem set to:",this.currentProblem);const t=window.location.href.includes("react-test.html");let n;if(t){if(n=document.getElementById("react-root"),!n)return void console.error("❌ TEST MODE: Could not find #react-root element");console.log("✅ TEST MODE: Found react-root container")}else{const e=this.findInjectionTarget();if(!e)return void console.log("❌ STANDALONE REACT: Could not find injection target");n=e,console.log("✅ STANDALONE REACT: Found injection container:",n)}const o=document.getElementById("leetmentor-standalone");o&&o.remove(),this.container=document.createElement("div"),this.container.id="leetmentor-standalone",t?(n.innerHTML="",n.appendChild(this.container)):n.insertBefore(this.container,n.firstChild);try{console.log("🔧 Creating React root..."),this.root=(0,i.createRoot)(this.container),console.log("🔧 React root created, rendering component...");const t={problem:e,interviewer:this};console.log("🔧 Component props:",t),this.root.render(s.createElement(f,t)),console.log("✅ STANDALONE REACT: React root created and rendered successfully")}catch(t){return console.error("❌ STANDALONE REACT: React injection failed, trying fallback:",t),console.error("Error details:",t.stack),void this.injectFallbackUI(e)}this.container.style.opacity="0",this.container.style.transform="translateY(20px) scale(0.95)",setTimeout(()=>{this.container.style.transition="all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",this.container.style.opacity="1",this.container.style.transform="translateY(0) scale(1)"},100),this.isInjected=!0,console.log("✅ STANDALONE REACT: Interview interface injected successfully!")}injectFallbackUI(e){console.log("🔄 STANDALONE REACT: Injecting fallback vanilla UI..."),this.container?(this.container.innerHTML=`\n            <div style="\n                background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));\n                backdrop-filter: blur(20px);\n                border: 1px solid rgba(255, 255, 255, 0.2);\n                border-radius: 24px;\n                padding: 24px;\n                margin: 16px 0;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n            ">\n                <div style="\n                    display: flex;\n                    align-items: center;\n                    gap: 16px;\n                    margin-bottom: 20px;\n                ">\n                    <div style="\n                        width: 48px;\n                        height: 48px;\n                        background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n                        border-radius: 16px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        font-size: 24px;\n                    ">🎯</div>\n                    <div>\n                        <h3 style="margin: 0; font-size: 24px; font-weight: 700; color: #1f2937;">LeetMentor</h3>\n                        <p style="margin: 0; color: #6b7280; font-weight: 500;">AI Interview Assistant</p>\n                    </div>\n                    <div style="\n                        margin-left: auto;\n                        padding: 8px 16px;\n                        background: rgba(34, 197, 94, 0.2);\n                        border: 1px solid rgba(34, 197, 94, 0.3);\n                        border-radius: 20px;\n                        color: #059669;\n                        font-weight: 600;\n                        font-size: 14px;\n                    ">ACTIVE</div>\n                </div>\n                \n                ${e?`\n                <div style="\n                    background: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 16px;\n                    padding: 20px;\n                    margin-bottom: 20px;\n                ">\n                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">\n                        <h4 style="margin: 0; font-size: 20px; font-weight: 600; color: #1f2937;">${e.title}</h4>\n                        <span style="\n                            padding: 6px 12px;\n                            background: linear-gradient(135deg, #f59e0b, #d97706);\n                            color: white;\n                            border-radius: 12px;\n                            font-weight: 600;\n                            font-size: 12px;\n                            text-transform: uppercase;\n                        ">${e.difficulty}</span>\n                    </div>\n                    <div style="color: #6b7280; font-size: 14px; margin-bottom: 16px;">LeetCode Problem</div>\n                    <div style="display: flex; gap: 16px; font-size: 14px; color: #6b7280;">\n                        <div style="display: flex; align-items: center; gap: 4px;">\n                            <span>📊</span>\n                            <span style="font-weight: 500;">Interview Practice</span>\n                        </div>\n                        <div style="display: flex; align-items: center; gap: 4px;">\n                            <span>⏱️</span>\n                            <span style="font-weight: 500;">Ready to start</span>\n                        </div>\n                    </div>\n                </div>\n                `:""}\n                \n                <div style="\n                    background: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 16px;\n                    padding: 20px;\n                    text-align: center;\n                ">\n                    <div style="font-size: 48px; margin-bottom: 16px;">⚠️</div>\n                    <h4 style="margin: 0 0 8px 0; color: #f59e0b; font-weight: 600;">React UI Blocked</h4>\n                    <p style="margin: 0 0 16px 0; color: #6b7280; line-height: 1.5;">\n                        The advanced UI is blocked by this page's security policy. \n                        <br>Try refreshing the page or check the browser console for more details.\n                    </p>\n                    <button onclick="window.location.reload()" style="\n                        background: linear-gradient(135deg, #3b82f6, #2563eb);\n                        color: white;\n                        border: none;\n                        padding: 12px 24px;\n                        border-radius: 12px;\n                        font-weight: 600;\n                        font-size: 14px;\n                        cursor: pointer;\n                        transition: transform 0.2s;\n                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">\n                        🔄 Refresh Page\n                    </button>\n                </div>\n            </div>\n        `,this.container.style.opacity="0",this.container.style.transform="translateY(20px)",setTimeout(()=>{this.container.style.transition="opacity 0.5s ease, transform 0.5s ease",this.container.style.opacity="1",this.container.style.transform="translateY(0)"},100),console.log("✅ FALLBACK: Vanilla UI injected successfully")):console.error("❌ FALLBACK: No container available")}findInjectionTarget(){console.log("🔍 STANDALONE REACT: Finding injection target...");const e=['[data-track-load="description_content"]','[data-e2e-locator="console-question-detail-description"]','[class*="question-content"]','[class*="description"]',".elfjS",".content__u3I1",".css-1jqueqk",'[data-cy="question-content"]','[class*="Description"]','[class*="content"]',"main","article",".main-content","#__next"];for(const t of e){const e=document.querySelector(t);if(e)return console.log(`✅ STANDALONE REACT: Found element with selector: ${t}`,e),console.log(`   Element tag: ${e.tagName}, classes: ${e.className}, id: ${e.id}`),e;console.log(`❌ STANDALONE REACT: Selector not found: ${t}`)}return console.log("⚠️ STANDALONE REACT: No specific injection target found, using body"),document.body}startInterview(){console.log("🚀 STANDALONE REACT: Starting interview..."),this.isInterviewActive=!0;let e=p.WELCOME_MESSAGE;this.currentProblem&&"No Problem Selected"!==this.currentProblem.title&&(e=p.WELCOME_MESSAGE.replace("{difficulty}",this.currentProblem.difficulty.toLowerCase()).replace("{title}",this.currentProblem.title));const t={id:this.generateId(),role:"assistant",content:e,timestamp:new Date};this.conversationHistory.push(t),this.forceUpdate()}handleUserMessage(e){console.log("💬 STANDALONE REACT: Handling user message:",e);const t={id:this.generateId(),role:"user",content:e,timestamp:new Date};this.conversationHistory.push(t),this.forceUpdate(),this.getAIResponse(e).then(async e=>{const t={id:this.generateId(),role:"assistant",content:e,timestamp:new Date};if(this.conversationHistory.push(t),this.forceUpdate(),this.voiceService&&this.isVoiceEnabled)try{const t={enabled:!0,language:"en-US",rate:1,pitch:1,volume:1};await this.voiceService.speak(e,t)}catch(e){console.error("🔊 Failed to speak AI response:",e)}}).catch(e=>{console.error("❌ STANDALONE REACT: Error getting AI response:",e);const t={id:this.generateId(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};this.conversationHistory.push(t),this.forceUpdate()})}clearChat(){this.conversationHistory=[],this.forceUpdate()}exportChat(){if(0===this.conversationHistory.length)return void this.showNotification("No chat history to export!","warning");const e=this.conversationHistory.map(e=>`${"user"===e.role?"You":"AI Interviewer"}: ${e.content}`).join("\n\n"),t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`leetmentor-interview-${(new Date).toISOString().split("T")[0]}.txt`,o.click(),URL.revokeObjectURL(n),this.showNotification("Chat exported successfully!","success")}showSettings(){this.showNotification("Settings panel coming soon!","info")}async startVoiceInput(){if(!this.voiceService||!this.isVoiceEnabled)throw new Error("Voice service not available or not enabled");try{const e={enabled:!0,language:"en-US",continuous:!1,interimResults:!0};await this.voiceService.startListening(e),console.log("🎤 Voice input started successfully")}catch(e){throw console.error("🎤 Failed to start voice input:",e),e}}stopVoiceInput(){this.voiceService&&(this.voiceService.stopListening(),console.log("🎤 Voice input stopped"))}skipVoiceResponse(){console.log("⏭️ STANDALONE REACT: Skipping voice response..."),this.voiceService&&this.voiceService.stopSpeaking(),this.forceUpdate()}generateId(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}forceUpdate(){this.root&&this.container&&this.root.render(s.createElement(f,{problem:this.currentProblem,interviewer:this,messages:this.conversationHistory,isInterviewActive:this.isInterviewActive}))}async getAIResponse(e){if(!this.chatGPTService)throw new Error("ChatGPT service not initialized");try{console.log("🤖 Getting AI response for:",e);const t=this.conversationHistory.map(e=>({role:e.role,content:e.content})),n=await this.chatGPTService.generateInterviewResponse(this.currentProblem||{title:"Algorithm Interview",difficulty:"Medium",description:"Technical interview practice"},t,e);return console.log("🤖 AI Response:",n),n}catch(e){return console.error("❌ Failed to get AI response:",e),"I apologize, but I'm having trouble generating a response right now. Could you please rephrase your question or try again?"}}showNotification(e,t="info"){const n=document.createElement("div"),o={success:{bg:"#22c55e",border:"#16a34a",icon:"✅"},error:{bg:"#ef4444",border:"#dc2626",icon:"❌"},warning:{bg:"#f59e0b",border:"#d97706",icon:"⚠️"},info:{bg:"#3b82f6",border:"#2563eb",icon:"ℹ️"}}[t];n.style.cssText=`\n      position: fixed;\n      top: 24px;\n      right: 24px;\n      background: linear-gradient(135deg, ${o.bg}, ${o.border});\n      color: white;\n      padding: 16px 20px;\n      border-radius: 12px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10001;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n      transform: translateX(100%) scale(0.9);\n      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      border: 1px solid rgba(255, 255, 255, 0.2);\n      backdrop-filter: blur(10px);\n      max-width: 400px;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      letter-spacing: 0.3px;\n    `,n.innerHTML=`\n      <span style="font-size: 16px;">${o.icon}</span>\n      <span>${e}</span>\n    `,document.body.appendChild(n),setTimeout(()=>{n.style.transform="translateX(0) scale(1)"},100),setTimeout(()=>{n.style.transform="translateX(100%) scale(0.9)",n.style.opacity="0",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},400)},4e3)}}const f=({problem:e,interviewer:t,messages:n=[],isInterviewActive:i=!1})=>{console.log("🔧 StandaloneInterfaceReactWrapper called with:",{problem:e,interviewer:t,messages:n,isInterviewActive:i});const r=t.isTyping||!1,[a,l]=(0,s.useState)(!1),c=(0,s.useCallback)(e=>{t.isTyping=!0,t.forceUpdate(),t.handleUserMessage(e)},[t]),u=(0,s.useCallback)(()=>{t.startInterview()},[t]),h=(0,s.useCallback)(()=>{t.showSettings()},[t]),p=(0,s.useCallback)(()=>{t.clearChat()},[t]),g=(0,s.useCallback)(()=>{t.exportChat()},[t]),m=(0,s.useCallback)(async()=>{console.log("🎤 Starting voice input..."),l(!0);try{await t.startVoiceInput(),t.showNotification("🎤 Voice input started!","success")}catch(e){console.error("Voice input failed:",e),l(!1),t.showNotification("🎤 Voice input failed","error")}},[t]),f=(0,s.useCallback)(()=>{console.log("🎤 Stopping voice input..."),l(!1),t.stopVoiceInput(),t.showNotification("🎤 Voice input stopped","info")},[t]),b=(0,s.useCallback)(()=>{console.log("⏭️ Skipping voice response..."),t.isTyping=!1,t.forceUpdate(),t.skipVoiceResponse(),t.showNotification("⏭️ Voice response skipped","info")},[t]),v=(0,s.useCallback)(e=>{console.log(`🎵 Speed change requested: ${e}x`),t.setVoiceSpeed(e)},[t]);return(0,o.jsx)(d,{problem:e,onSendMessage:c,onStartInterview:u,onSettingsClick:h,onClearChat:p,onExportChat:g,onStartVoiceInput:m,onStopVoiceInput:f,onSkipVoice:b,onSpeedChange:v,currentSpeed:t.voiceSpeed,messages:n,isInterviewActive:i,isTyping:r,isListening:a})},b=window.location.href.includes("react-test.html");console.log("🔍 STANDALONE SCRIPT INITIALIZATION:"),console.log("Current URL:",window.location.href),console.log("Is test mode:",b),console.log("Existing leetmentorStandaloneReact:",!!window.leetmentorStandaloneReact),console.log("Existing leetmentorTestInstance:",!!window.leetmentorTestInstance);try{if(b){console.log("🧪 TEST MODE: Initializing React components for testing...");const e=new m;console.log("✅ StandaloneReactInterviewer created successfully"),window.leetmentorTestInstance=e,console.log("✅ Test instance exported to window"),console.log("✅ TEST MODE: React components loaded successfully!")}else if(window.leetmentorStandaloneReact)console.log("⚠️ STANDALONE REACT: Instance already exists, skipping initialization");else{console.log("🚀 STANDALONE REACT: About to create StandaloneReactInterviewer instance...");const e=new m;console.log("✅ StandaloneReactInterviewer created successfully"),window.leetmentorStandaloneReact=e,console.log("✅ Instance exported to window"),console.log("✅ STANDALONE REACT: Content script loaded successfully!")}}catch(e){console.error("❌ FATAL ERROR during initialization:",e),console.error("Error stack:",e.stack),e instanceof ReferenceError?console.error("ReferenceError - Check if all dependencies are loaded"):e instanceof TypeError?console.error("TypeError - Check method calls and property access"):console.error("Unknown error type:",e.constructor.name)}window.StandaloneReactInterviewer=m,console.log("✅ STANDALONE REACT: Class exported to global scope"),console.log("StandaloneReactInterviewer available on window:",!!window.StandaloneReactInterviewer)}},n={};function o(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,s,i)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],a=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every(e=>o.O[e](n[l]))?n.splice(l--,1):(a=!1,i<r&&(r=i));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={666:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[r,a,l]=n,c=0;if(r.some(t=>0!==e[t])){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var d=l(o)}for(t&&t(n);c<r.length;c++)i=r[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self.webpackChunkleetmentor=self.webpackChunkleetmentor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=o.O(void 0,[223,709],()=>o(930));s=o.O(s)})();